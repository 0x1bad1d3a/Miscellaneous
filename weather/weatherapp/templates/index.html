<html>

    <head>
        <style>

            body {
                margin: 0;
            }

            input {
                height: 2em;
                font-size: 1.5em;
                width: 60%;
                padding-left: 0.5em;
                padding-right: 0.5em;
            }

            button {
                height: 2em;
                font-size: 1.5em;
                font-weight: bold;
                padding-left: 0.5em;
                padding-right: 0.5em;
            }

            #map {
                width: 100%;
                height: 70%;
            }

            #weather_chart {
                height: 30%;
                width: 100%;
                position: absolute;
                bottom: 0;
                left: 0;
                padding: 0;
                background-color: white;
            }

            .search_form {
                position: absolute;
                text-align: center;
                width: 100%;
                top: 5%;
                margin: 0 auto;
                z-index: 100;
            }
        </style>
    </head>

    <body>

        {% load staticfiles %}
        <script src="{% static "Chart.js" %}"></script>

        <form action="{% url 'index' %}" method="post" class="search_form">
            {% csrf_token %}
            <input type="text" name="location"/>
            <button type="submit">Search</button>
        </form>

        <div id="map"></div>
        <script>
            function initMap(){
                var mapDiv = document.getElementById('map');
                var map = new google.maps.Map(mapDiv, {
                    center: {lat: {{ lat }}, lng: {{ lng }}},
                    mapTypeId: google.maps.MapTypeId.ROADMAP,
                    disableDefaultUI: true,
                    draggable: false,
                    zoomControl: false,
                    disableDoubleClickZoom: true,
                    zoom: 7
                });
            }
        </script>
        <script src="https://maps.googleapis.com/maps/api/js?callback=initMap" async defer></script>

        <div id="weather_chart">
            <canvas id="weatherChart"></canvas>
        </div>
        <script>
            var ctx = document.getElementById("weatherChart");
            var myChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: {{ date_list|safe }},
                    datasets: [{
                        label: 'Temperature High',
                        data: {{ temperature_list_high }} 
                    },
                    {
                        label: 'Temperature Low',
                        data: {{ temperature_list_low }}
                    }]
                },
                options: {
                    scales: {
                        yAxes: [{
                            ticks: {
                                beginAtZero:true
                            }
                        }]
                    }
                }
            });
        </script>

    </body>

</html>
