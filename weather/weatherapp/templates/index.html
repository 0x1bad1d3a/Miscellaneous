
<html>
    <head>
        <style>
#map {
    width: 100%;
    height: 100%;
}
        </style>
    </head>
    <body>
        {% load staticfiles %}
        <script src="{% static "Chart.js" %}"></script>

        <form action="{% url 'index' %}" method="post" style="position:absolute; text-align:center; width:100%; top:5%; margin: 0 auto; z-index:100">
            {% csrf_token %}
            <input type="text" name="location"/>
            <input type="submit"/>
        </form>

        <div id="map"></div>
        <script>
            function initMap(){
                var mapDiv = document.getElementById('map');
                var map = new google.maps.Map(mapDiv, {
                    center: {lat: 44, lng: -78},
                    zoom: 4 
                });
            }
        </script>
        <script src="https://maps.googleapis.com/maps/api/js?callback=initMap"
                async defer></script>

        <div style="height:400px; width:100%; position:absolute; bottom:0; left:0; background-color: white">
            <canvas id="weatherChart"></canvas>
        </div>

        <script>
var ctx = document.getElementById("weatherChart");
var myChart = new Chart(ctx, {
    type: 'bar',
    data: {
        labels: {{ date_list|safe }},
        datasets: [{
            label: 'Temperature',
            data: {{ temperature_list }} 
        }]
    },
    options: {
        scales: {
            yAxes: [{
                ticks: {
                    beginAtZero:true
                }
            }]
        }
    }
});
        </script>

        {% if history_list %}
        <ul>
            {% for h in history_list %}
            <li>{{ h }}</li>
            {% endfor %}
        </ul>
        {% else %}
        <p>No history available.</p>
        {% endif %}
    </body>
</html>
